<html xml:lang="en" lang="en" xmlns="http:/www.w3.org/1999/xhtml">
<title>
	Cranach (Carousel-Simple)
</title>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta charset="UTF-8"/>
	<link rel="shortcut icon" href="#"/>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

	<link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">

	<script src="../js/canvas-free-drawing.js"></script>

	<link rel="stylesheet" href="../styles_nohover.css" media="all">

</head>

<body>
	<div id="container" class="annotate" style="position:relative;overflow-y:auto">
		<div class="drawing-pad" id="drawing-pad">
		</div>
		<div class="canvas-controls">
			<nav class="navbar navbar-collapse-lg navbar-light">
				<div class="container-fluid">
					<div>
						<ul class="navbar-nav me-auto mb-2 mb-lg-0">
							<li class="nav-item">
								<a class="nav-link annotate enable" href="#">
									<span class="material-icons brush">
										brush
									</span>
									<span class="material-icons cursor hidden">
										near_me
									</span>
								</a>
							</li>
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" id="colorDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="material-icons">color_lens</span></a>
								<ul class="dropdown-menu dropdown-menu-lg-end" aria-labelledby="colorDropdown" style="margin-left:-125px">
									<li><a class="dropdown-item annotate red color" href="#">Red</a></li>
									<li><a class="dropdown-item annotate green color" href="#">Green</a></li>
									<li><a class="dropdown-item annotate blue color" href="#">Blue</a></li>
									<li><a class="dropdown-item annotate orange color" href="#">Orange</a></li>
									<li><a class="dropdown-item annotate black color" href="#">Black</a></li>
								</ul>
							</li>
							<li class="nav-item">
								<a class="nav-link annotate erase" href="#">
									<i class="bi bi-eraser-fill"></i>
									<!-- <span class="material-icons-outlined">mode_edit_outline</span> -->
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link annotate expand" href="#">
									<span class="material-icons-outlined">
										aspect_ratio
									</span>
									<!-- <span class="material-icons">expand</span> -->
								</a>
							</li>
							<li class="nav-item"><a class="nav-link annotate undo" href="#"><span class="material-icons">undo</span></a></li>
							<li class="nav-item"><a class="nav-link annotate redo" href="#"><span class="material-icons">redo</span></a></li>
							<li class="nav-item"><a class="nav-link annotate clear" href="#"><span class="material-icons">restart_alt</span></a></li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</div>
	<script>
	function canvasControlsEnableEvent(slide) {
		slide.cfd.enableDrawingMode();
		slide.cfd.canvas.classList.remove('hidden');
		slide.cfd.setDraw();
		document.querySelectorAll('.canvas-controls .nav-link').forEach(e => e.classList.remove('disabled'));
		document.querySelector('.annotate.enable .brush').classList.remove('hidden');
		document.querySelector('.annotate.enable .cursor').classList.add('hidden');
		slide.cfd.canvas.classList.remove('disabled');
		document.querySelector('#colorDropdown').style.color = `rgb(${slide.cfd.strokeColor})`;
	}

	function canvasControlsDisableEvent(slide) {
	    // console.log('canvasControlDisableEvent');
		if (typeof slide.cfd != 'undefined') {
			slide.cfd.disableDrawingMode();
			slide.cfd.canvas.classList.add('disabled');
		}
		document.querySelectorAll('.canvas-controls .nav-link:not(.enable)').forEach(e => e.classList.add('disabled'));
		document.querySelector('.canvas-controls .enable').classList.remove('disabled');
	    document.querySelector('.annotate.enable .brush').classList.add('hidden');
	    document.querySelector('.annotate.enable .cursor').classList.remove('hidden');
		document.querySelector('#colorDropdown').style.color = '';
	}
	document.addEventListener('DOMContentLoaded', () => {
		const output = document.querySelector('#container');
		let width = output.scrollWidth;
		let height = output.scrollHeight - 5;
		const slide = document.querySelector('.drawing-pad');

		slide.cfd = new CanvasFreeDrawing({
			elementId: slide.id,
			width: width,
			height: height,
			showWarnings: true,
			output: output,
		});
		slide.cfd.setLineWidth(2);

		document.querySelectorAll('.canvas-controls .clear').forEach(
			el => el.addEventListener('click', function() {
				if (slide === null) { return 0; }
				if (slide.cfd.isDrawingModeEnabled) {
					slide.cfd.clear();
				}
			})
		);
		document.querySelectorAll('.canvas-controls .expand').forEach(el => el.addEventListener('click', function() {
			if (slide === null) { return 0; }
			if (typeof slide.cfd != 'undefined') {
				slide.cfd.expandCanvas(1, 300, output);
			}
		}));
		document.querySelectorAll('.canvas-controls .disable').forEach(el => el.addEventListener('click', function() {
			if (slide === null) { return 0; }
			canvasControlsDisableEvent(slide);
		}));
		document.querySelectorAll('.canvas-controls .erase').forEach(el => el.addEventListener('click', function(evt) {
			if (slide === null) { return 0; }
			slide.cfd.setErase();
			document.querySelectorAll('.canvas-controls .nav-link').forEach(el => el.classList.remove('disabled'));
			evt.currentTarget.classList.add('disabled');
	        document.querySelector('.annotate.enable .brush').classList.remove('hidden');
	        document.querySelector('.annotate.enable .cursor').classList.add('hidden');
		}));
		// $('.canvas-controls .enable').off();
		document.querySelectorAll('.canvas-controls .enable').forEach(el => el.addEventListener('click', function(evt) {
			if (slide === null) { return 0; }

	        slide.cfd.toggleDrawingMode();
	        if (slide.cfd.isDrawingModeEnabled) {
	            canvasControlsEnableEvent(slide);
	        } else {
	            if (slide === null) { return 0; }
	    		canvasControlsDisableEvent(slide);
			}
		}));
		document.querySelectorAll('.canvas-controls .undo').forEach(el => el.addEventListener('click', () => {
			if (slide === null) { return 0; }
			slide.cfd.undo()
		}));
		document.querySelectorAll('.canvas-controls .redo').forEach(el => el.addEventListener('click', () => {
			if (slide === null) { return 0; }
			slide.cfd.redo()
		}));
		document.querySelectorAll('.canvas-controls .red').forEach(el => el.addEventListener('click', () => {
			if (slide === null) { return 0; }
			let color = [180, 80, 80];
			slide.cfd.setDrawingColor(color)
			document.querySelector('#colorDropdown').style.color = `rgb(${color.join(',')})`;
		}));
		document.querySelectorAll('.canvas-controls .green').forEach(el => el.addEventListener('click', () => {
			if (slide === null) { return 0; }
			let color = [0, 139, 69];
			slide.cfd.setDrawingColor(color);
			document.querySelector('#colorDropdown').style.color = `rgb(${color.join(',')})`;
		}));
		document.querySelectorAll('.canvas-controls .blue').forEach(el => el.addEventListener('click', () => {
			if (slide === null) { return 0; }
			let color = [40, 122, 181];
			slide.cfd.setDrawingColor(color);
			document.querySelector('#colorDropdown').style.color = `rgb(${color.join(',')})`;
		}));
		document.querySelectorAll('.canvas-controls .orange').forEach(el => el.addEventListener('click', () => {
			if (slide === null) { return 0; }
			let color = [240, 110, 0];
			slide.cfd.setDrawingColor(color);
			document.querySelector('#colorDropdown').style.color = `rgb(${color.join(',')})`;
		}));
		document.querySelectorAll('.canvas-controls .black').forEach(el => el.addEventListener('click', () => {
			if (slide === null) { return 0; }
			let color = [115, 115, 115];
			slide.cfd.setDrawingColor(color);
			document.querySelector('#colorDropdown').style.color = `rgb(${color.join(',')})`;
		}));
	});
	</script>
</body>
</html>
